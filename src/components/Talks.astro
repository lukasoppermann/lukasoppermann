---
import type { HTMLAttributes } from 'astro/types';
import type { CollectionEntry } from 'astro:content';
import DateTime from './DateTime.astro';
import Link from "./Link.astro";
import AboutItem from './AboutItem.astro';

interface Props extends HTMLAttributes<'ul'> {
  title?: string
  items: CollectionEntry<'talks'>[]
  moreLink?: string
}

const { title = "Talks", items, moreLink, ...attr } = Astro.props;
---
<style>
  h3 {
    font: var(--typestyle__h5);
    color: var(--on-background__low-emphasis);
    margin-bottom: 24px;
  }
</style>

<div class:list={[attr.class]}>
  <h3>{title}</h3>
  {items.map(async (item) => {
    const { Content } = await item.render();
    return <AboutItem
      from={item.data.date}
      title={item.data.title}
      event={item.data.event}
      ><Content /></AboutItem>
  })}
  {moreLink && (
    <div>
      <Link style="link" icon href={moreLink} target="_blank">All talks</Link>
    </div>
  )}
</div>